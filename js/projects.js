let assignments = {
    /*"Karel Paint Pair Challenge": {
        "projects": [
            {
                "title":"Ocean Scene",
                "author":"Asher Ellet and Landen Tillman",
                "link":`https://codehs.com/share/id/create-your-ultrakarel-image-hzhFF4/run `
            },
            {
                "title":"American Flag",
                "author":"Kabyn Peterson",
                "link":`https://codehs.com/share/id/create-your-ultrakarel-image-omHCCL/run `
            },
            {
                "title":"Mario Jumping into Pipe",
                "author":"Robert Cahoon and Gabe Garmire",
                "link":`https://codehs.com/share/id/create-your-ultrakarel-image-z9pCUV/run`
            },
            {
                "title":"Pixel Knight",
                "author":"Luis Loyola and Lucas Welch",
                "link":`https://codehs.com/share/id/create-your-ultrakarel-image-TpyC4L/run`
            },
            {
                "title":"Lighthouse",
                "author":"Ridley Sheets",
                "link":`https://codehs.com/share/id/create-your-ultrakarel-image-GrDsBz/run`
            },
            {
                "title":"Heman",
                "author":"John Tharp and Carter Harris",
                "link":`https://codehs.com/share/id/create-your-ultrakarel-image-iEJ7Es/run`
            }
        ]
    },*/
    "Canvas Pair Graphics Challenge":{
        "projects": [
            {
                "title":"Fireworks",
                "author":"Kabyn Peterson and Landen Tillman",
                "link":`https://codehs.com/share/id/pair-graphics-challenge-DzR0lM/run`,
                "enbed":`https://codehs.com/sandbox/pschorey/fireworks-kabyn-peterson-and-landen-tillman/embed/?display_mode=default&read_only=True&show_file_tree=False`
            },
            {
                "title":"Spooky House",
                "author":"Ridley Sheets",
                "link":`https://codehs.com/share/id/pair-graphics-challenge-cXUpFe/run`,
                "enbed":`https://codehs.com/sandbox/pschorey/spooky-house-ridley-sheets/embed/?display_mode=default&show_file_tree=False"`
            },
            {
                "title":"Hilly Scene",
                "author":"Robert Cahoon and Keigan Fortriede",
                "link":`https://codehs.com/share/id/pair-graphics-challenge-pY8qrL/run`,
                "enbed":`https://codehs.com/sandbox/pschorey/hilly-scene-robert-cahoon-and-keigan-fortriede/embed/?display_mode=default&show_file_tree=False`
            },
            {
                "title":"Light",
                "author":"Grant Johnson and Ethan Dalrymple",
                "link":`https://codehs.com/share/id/pair-graphics-challenge-3FfzlC/run`,
                "enbed":`https://codehs.com/sandbox/pschorey/light-grant-johnson-and-ethan-dalrymple/embed/?display_mode=default&read_only=True&show_file_tree=False`
            },
            {
                "title":"Snowy Home",
                "author":"Johnathan Tharp and Gabe Garmire",
                "link":`https://codehs.com/share/id/pair-graphics-challenge-eS8iK5/run`,
                "enbed":`https://codehs.com/sandbox/pschorey/snowy-home-johnathan-tharp-and-gabe-garmire/embed/?display_mode=default&read_only=True&show_file_tree=False`
            },
            {
                "title":"Disco Barn",
                "author":"Bryce Wheeler and Allana White",
                "link":`https://codehs.com/share/id/pair-graphics-challenge-vG5076/run`,
                "enbed":`https://codehs.com/sandbox/pschorey/party-shed-bryce-wheeler-and-allana-white/embed/?display_mode=default&read_only=True&show_file_tree=False`
            },
            {
                "title":"Leprechaun",
                "author":"Lucas Welch and Cash Fegley",
                "link":`https://codehs.com/share/id/pair-graphics-challenge-dxiTe0/run`,
                "enbed":`https://codehs.com/sandbox/pschorey/leprechaun-lucas-wheeler-and-cash-fegley/embed/?display_mode=default&read_only=True&show_file_tree=False`
            }
        ]
    },
    "Semester 1 Final Projects": {       
        "projects": [
        {
            "title":"Slime",
            "author":"Michael Baker",
            "link":`https://codehs.com/share/id/midterm-performance-task-project-L79jSz/run`,
            "enbed":`https://codehs.com/sandbox/pschorey/slime-michael-baker/embed/?display_mode=default&read_only=True&show_file_tree=False`
        },
        {
            "title":"Driving",
            "author":"Asher Ellet",
            "link":`https://codehs.com/share/id/midterm-performance-task-project-0i9dmY/run`,
            "enbed":`https://codehs.com/sandbox/pschorey/driving-asher-ellet/embed/?display_mode=default&read_only=True&show_file_tree=False`
        },
        {
            "title":"Targets",
            "author":"Aiden Privett",
            "link":`https://codehs.com/share/id/midterm-performance-task-project-mFxvbG/run`,
            "enbed":`https://codehs.com/sandbox/pschorey/targets-aiden-privett/embed/?display_mode=default&show_file_tree=False`
        },
        {
            "title":"Fish Clicker",
            "author":"Cash Fegley",
            "link":`https://codehs.com/sandbox/pschorey/fish-clicker-cash-fegley`,
            "enbed":`https://codehs.com/sandbox/pschorey/fish-clicker-cash-fegley/embed/?display_mode=default&show_file_tree=False`
        },
        {
            "title":"Lemonade",
            "author":"Bryce Wheeler and Lucas Welch",
            "link":`https://codehs.com/sandbox/pschorey/lemonade-bryce-wheeler-and-lucas-welch`,
            "enbed":`https://codehs.com/sandbox/pschorey/lemonade-bryce-wheeler-and-lucas-welch/embed/?display_mode=default&show_file_tree=False`
        },
        {
            "title":"Terracraft",
            "author":"John Tharp",
            "link":`https://codehs.com/sandbox/pschorey/terracraft-john-tharp`,
            "enbed":`https://codehs.com/sandbox/pschorey/terracraft-john-tharp/embed/?display_mode=default&show_file_tree=False`
        },
        {
            "title":"Wizard PvP",
            "author":"Grant Johnson",
            "link":`https://codehs.com/sandbox/pschorey/wizard-pvp-grant-johnson`,
            "enbed":`https://codehs.com/sandbox/pschorey/wizard-pvp-grant-johnson/embed/?display_mode=default&show_file_tree=False`
        },
        {
            "title":"Shopping Cart",
            "author":"Gabe Garmire",
            "link":`https://codehs.com/sandbox/pschorey/shopping-gabe-garmire`,
            "enbed":`https://codehs.com/sandbox/pschorey/shopping-gabe-garmire/embed/?display_mode=default&show_file_tree=False`
        },/*
        {
            "title":"21",
            "author":"Jasper Huneycutt",
            "link":`https://codehs.com/sandbox/pschorey/21-jasper-huneycutt`,
            "enbed":`https://codehs.com/sandbox/pschorey/21-jasper-huneycutt/embed/?display_mode=default&show_file_tree=False`
        },*/
        ]
    },
    "Basic Games Pair Programing": {       
        "projects": [
            {
                "title":"Space Rocks",
                "author":"Michael Baker and Daniel Herbst",
                "link":`https://codehs.com/share/id/pair-programing-basic-game-challenge-bHbHTh/run`,
                "enbed":`https://codehs.com/sandbox/pschorey/michael-baker-asteroids/embed/?display_mode=default&read_only=True&show_file_tree=False`
            },
            {
                "title":"Tron",
                "author":"Asher Ellet and Blake Mustaine",
                "link":`https://codehs.com/share/id/pair-programing-basic-game-challenge-yjoAlM/run`,
                "enbed":`https://codehs.com/sandbox/pschorey/asher-ellet-tron/embed/?display_mode=default&read_only=True&show_file_tree=False`
            },
            {
                "title":"Tetris",
                "author":"Kabyn Peterson and Ethan Kutz",
                "link":`https://codehs.com/share/id/pair-programing-basic-game-challenge-CMgiJc/run`,
                "enbed":`https://codehs.com/sandbox/pschorey/kabyn-peterson-tetris/embed/?display_mode=default&read_only=True&show_file_tree=False`
            },
            /* --not working...
            {
                "title":"Space Invaders",
                "author":"Aiden Privett, Michael Chub, and Sophie Marks",
                "link":`https://codehs.com/share/id/pair-programing-basic-game-challenge-tsZ9cf/run`,
                "enbed":`https://codehs.com/sandbox/pschorey/aiden-privett-space-invaders/embed/?display_mode=default&read_only=True&show_file_tree=False`
            },*/
            {
                "title":"Duck Hunt",
                "author":"Landen Tillman and Cory Hudson",
                "link":`https://codehs.com/share/id/pair-programing-basic-game-challenge-hBpiFV/run `,
                "enbed":`https://codehs.com/sandbox/pschorey/landen-tillman-duck-hunt/embed/?display_mode=default&read_only=True&show_file_tree=False`
            }
        ]
    },    
    "Semester 2 Final Projects": {       
        "projects": [
            {
                "title":"Runaway Dots",
                "author":"Michael Baker",
                "link":`https://codehs.com/share/id/create-performance-task-1HishK/run`,
                "enbed":`https://codehs.com/sandbox/pschorey/michael-baker-runaway-dots/embed/?display_mode=default&show_file_tree=False`
            },
            {
                "title":"Knightâ€™s Journey",
                "author":"Asher Ellet",
                "link":`https://codehs.com/share/id/create-performance-task-QxjY3i/run`,
                "enbed":`https://codehs.com/sandbox/pschorey/asher-ellet-knights-journey/embed/?display_mode=default&show_file_tree=False`
            },
            {
                "title":"Asteroids",
                "author":"Cory Hudson",
                "link":`https://codehs.com/share/id/create-performance-task-rwkAnI/run`,
                "enbed":`https://codehs.com/sandbox/pschorey/cory-hudson-asteroids/embed/?display_mode=default&show_file_tree=False`
            },
            {
                "title":"Geometry Clash",
                "author":"Gabe Moore",
                "link":`https://codehs.com/share/id/create-performance-task-ecWxoq/run`,
                "enbed":`https://codehs.com/sandbox/pschorey/gabe-moore-geometry-clash/embed/?display_mode=default&show_file_tree=False`
            },
            {
                "title":"Polar Coordinates",
                "author":"Kabyn Peterson",
                "link":`https://codehs.com/share/id/create-performance-task-SKAwUV/run`,
                "enbed":`https://codehs.com/sandbox/pschorey/kabyn-peterson-polar-coordinates/embed/?display_mode=default&show_file_tree=False`
            },
            {
                "title":"Portals",
                "author":"Aiden Privett",
                "link":`https://codehs.com/share/id/create-performance-task-CIl9W3/run`,
                "enbed":`https://codehs.com/sandbox/pschorey/aiden-privett-portals/embed/?display_mode=default&show_file_tree=False`
            }
        ]
    }
};



document.addEventListener('DOMContentLoaded', function() {
    populateAssignments();
    assignmentSelectedListener();
    projectSelectedListener();
 }, false);

let populateAssignments = () => {
    let assignmentSelect = document.getElementById("assignment-select")

    for (k in assignments) {
        let option = document.createElement("option");
        option.text = k;
        option.value = k;
        assignmentSelect.add(option);
    }
}


let populateProjects = (value) => {
    let projectSelect = document.getElementById("project-select");
    let totalOpts = projectSelect.options.length
    //clear all options
    for (let i = 0; i < totalOpts; i++){
        projectSelect.remove(0);
    }
    
    if (value != "null") {
        //populate projects
        assignments[value]["projects"].map((obj)=>{
            console.log(obj.title);
            console.log(obj.link);
            let option = document.createElement("option");
            option.text = obj.title;
            option.value = value != "Karel Paint Pair Challenge" ? obj.enbed : obj.link;
            projectSelect.add(option);
        })

        //sort projects alphabetically
        sortSelect(projectSelect);

    }
}

//sort options alphabetically
//from: https://stackoverflow.com/questions/278089/javascript-to-sort-contents-of-select-element
let sortSelect = (selElem) => {
    //create a temp array from current options in the select
    var tmpAry = new Array();
    for (var i=0;i<selElem.options.length;i++) {
        tmpAry[i] = new Array();
        tmpAry[i][0] = selElem.options[i].text;
        tmpAry[i][1] = selElem.options[i].value;
    }
    tmpAry.sort();

    //remove current options from select
    while (selElem.options.length > 0) {
        selElem.options[0] = null;
    }

    //add sorted options to the select
    let placeholder = new Option("Pick a project", "");
    selElem.options[0] = placeholder;

    for (var i=0;i<tmpAry.length;i++) {
        var op = new Option(tmpAry[i][0], tmpAry[i][1]);
        selElem.options[i + 1] = op;
    }
    return;
}

//listens to when an assignment category is picked, populates project select with results
let assignmentSelectedListener = () => {
    let assignmentSelect = document.getElementById("assignment-select")
    assignmentSelect.addEventListener("change", function() {
        removePreview();
        if (this.value == null) {
          console.log('null yo!');
          populateProjects(null)
          //clear assignments
        }else{
           console.log(this.value);
           populateProjects(this.value);
        }
      });
}

//listens to when a project is picked, shows iframe demo below
let projectSelectedListener = () => {
    let projectSelect = document.getElementById("project-select")
    projectSelect.addEventListener("change", function() {
        removePreview();

        if (this.value == null) {

        }else{
           const el = document.createElement("iframe");
            el.width = "1020px";
            el.height = "600px";
            el.src = this.value;//"https://codehs.com/sandbox/pschorey/leprechaun-lucas-wheeler-and-cash-fegley/embed/?display_mode=default&read_only=True&show_file_tree=False";
            document.getElementById("project-preview").appendChild(el);
        }
    });
}

let removePreview = () => {
    let projectPreview = document.getElementById("project-preview");
    while (projectPreview.firstChild) {
        projectPreview.removeChild(projectPreview.firstChild);
    }
}

